Version 4
SHEET 1 1416 1324
WIRE 272 48 64 48
WIRE 336 48 272 48
WIRE 544 48 432 48
WIRE 624 48 544 48
WIRE 784 48 704 48
WIRE 992 48 784 48
WIRE 64 112 64 48
WIRE 992 144 992 48
WIRE 544 160 544 48
WIRE 784 160 784 48
WIRE 384 192 384 112
WIRE 64 224 64 192
WIRE 64 240 64 224
WIRE 544 304 544 224
WIRE 784 304 784 224
WIRE 992 320 992 224
WIRE -624 336 -624 288
WIRE -624 336 -752 336
WIRE -752 368 -752 336
WIRE -624 368 -624 336
WIRE -752 496 -752 448
WIRE -624 496 -624 448
WIRE -624 496 -752 496
WIRE -128 496 -256 496
WIRE 48 496 -48 496
WIRE -624 512 -624 496
WIRE -464 512 -464 480
WIRE -464 512 -624 512
WIRE -624 544 -624 512
WIRE -624 656 -624 624
WIRE -384 656 -624 656
WIRE -256 656 -256 496
WIRE -256 656 -304 656
WIRE -192 656 -256 656
WIRE 272 656 272 48
WIRE -624 672 -624 656
WIRE 48 672 48 496
WIRE 48 672 -128 672
WIRE 240 672 48 672
WIRE -192 688 -256 688
WIRE 384 688 384 272
WIRE 384 688 304 688
WIRE 240 704 160 704
WIRE 160 752 160 704
WIRE -624 768 -624 752
WIRE -256 768 -256 688
WIRE -80 768 -256 768
WIRE 272 768 272 720
WIRE -256 800 -256 768
WIRE -80 864 -80 768
WIRE 160 864 160 832
WIRE 160 864 -80 864
WIRE -256 960 -256 880
WIRE -400 976 -400 944
WIRE -400 1088 -400 1056
WIRE -304 1088 -400 1088
WIRE -400 1120 -400 1088
WIRE -304 1120 -304 1088
WIRE -400 1232 -400 1200
FLAG 544 304 0
FLAG 784 304 0
FLAG 992 320 0
FLAG 64 224 0
FLAG 272 768 0
FLAG -624 768 0
FLAG 992 48 Vout
FLAG -624 288 Vout
FLAG -256 960 0
FLAG -160 640 Vcc
FLAG -160 704 Vee
FLAG -304 1120 0
FLAG -400 944 Vcc
FLAG -400 1232 Vee
FLAG -464 480 Vcomp
SYMBOL ind 608 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 220u
SYMATTR SpiceLine Rser=1400m
SYMBOL cap 768 160 R0
SYMATTR InstName C1
SYMATTR Value 1u
SYMBOL current 992 144 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 20m
SYMBOL voltage 64 96 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 9
SYMBOL Comparators\\LT1720 272 624 R0
SYMATTR InstName U1
SYMBOL voltage 160 736 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(-0.5 0.5 0 {Trf} {Trf} 0 {Tosc} 10000)
SYMBOL res 368 176 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -640 528 R0
SYMATTR InstName R
SYMATTR Value 4k
SYMBOL res -640 656 R0
SYMATTR InstName R3
SYMATTR Value 2k
SYMBOL diode 528 224 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL pnp 432 112 M270
SYMATTR InstName Q1
SYMBOL Opamps\\UniversalOpamp2 -160 672 R0
SYMATTR InstName U2
SYMBOL voltage -256 784 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 1
SYMBOL res -32 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -288 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL voltage -400 960 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL voltage -400 1104 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 15
SYMBOL res -640 352 R0
SYMATTR InstName R5
SYMATTR Value 50
SYMBOL voltage -752 352 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value SINE(0 10m 100k)
SYMATTR Value2 AC 10m 0
TEXT -600 -32 Left 2 !;tran 0 1010u 1000u uic
TEXT -72 144 Left 5 ;Vin
TEXT 1056 200 Left 5 ;Iout
TEXT 928 0 Left 5 ;Vout
TEXT 232 872 Left 2 !.param Fosc 1/2.4e-6\n.param Tosc 1/Fosc\n.param Trf Tosc/2
TEXT -600 40 Left 2 !.ac oct 1 100 10k
